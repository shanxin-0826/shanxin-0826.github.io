"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4498],{3905:(e,n,r)=>{r.d(n,{Zo:()=>c,kt:()=>P});var t=r(7294);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?i(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function a(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=t.createContext({}),m=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):l(l({},n),e)),r},c=function(e){var n=m(e.components);return t.createElement(s.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var r=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),p=m(r),u=o,P=p["".concat(s,".").concat(u)]||p[u]||d[u]||i;return r?t.createElement(P,l(l({ref:n},c),{},{components:r})):t.createElement(P,l({ref:n},c))}));function P(e,n){var r=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=r.length,l=new Array(i);l[0]=u;var a={};for(var s in n)hasOwnProperty.call(n,s)&&(a[s]=n[s]);a.originalType=e,a[p]="string"==typeof e?e:o,l[1]=a;for(var m=2;m<i;m++)l[m]=r[m];return t.createElement.apply(null,l)}return t.createElement.apply(null,r)}u.displayName="MDXCreateElement"},6102:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>m});var t=r(7462),o=(r(7294),r(3905));const i={},l=void 0,a={unversionedId:"Node.js/Promise",id:"Node.js/Promise",title:"Promise",description:"\u5f02\u6b65\u8c03\u7528\u5fc5\u987b\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e;",source:"@site/docs/Node.js/Promise.md",sourceDirName:"Node.js",slug:"/Node.js/Promise",permalink:"/docs/Node.js/Promise",draft:!1,editUrl:"https://shanxin-0826.github.io/docs/Node.js/Promise.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"HTTP\u534f\u8bae",permalink:"/docs/Node.js/HTTP\u534f\u8bae"},next:{title:"async\u548cawait",permalink:"/docs/Node.js/async\u548cawait"}},s={},m=[{value:"\u5f02\u6b65\u8c03\u7528\u5fc5\u987b\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e;",id:"\u5f02\u6b65\u8c03\u7528\u5fc5\u987b\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e",level:2},{value:"\u95ee\u9898\uff1a",id:"\u95ee\u9898",level:3},{value:"Promise",id:"promise",level:2},{value:"\u521b\u5efaPromise",id:"\u521b\u5efapromise",level:3},{value:"\u4ecePromise\u4e2d\u8bfb\u53d6\u6570\u636e",id:"\u4ecepromise\u4e2d\u8bfb\u53d6\u6570\u636e",level:3},{value:"Promise\u4e2d\u7ef4\u62a4\u4e86\u4e24\u4e2a\u9690\u85cf\u5c5e\u6027",id:"promise\u4e2d\u7ef4\u62a4\u4e86\u4e24\u4e2a\u9690\u85cf\u5c5e\u6027",level:3},{value:"\u6d41\u7a0b\uff1a",id:"\u6d41\u7a0b",level:3},{value:"\u8bfb\u53d6\u6d41\u7a0b\uff1a",id:"\u8bfb\u53d6\u6d41\u7a0b",level:3},{value:"catch();",id:"catch",level:2},{value:"finally();",id:"finally",level:2},{value:"\u5c0f\u7ed3\uff1a",id:"\u5c0f\u7ed3",level:3},{value:"Promise\u4e2d\u7684",id:"promise\u4e2d\u7684",level:2},{value:"\u5bf9promise\u8fdb\u884c\u94fe\u5f0f\u8c03\u7528\u65f6",id:"\u5bf9promise\u8fdb\u884c\u94fe\u5f0f\u8c03\u7528\u65f6",level:3},{value:"\u9759\u6001\u65b9\u6cd5",id:"\u9759\u6001\u65b9\u6cd5",level:3}],c={toc:m},p="wrapper";function d(e){let{components:n,...r}=e;return(0,o.kt)(p,(0,t.Z)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"\u5f02\u6b65\u8c03\u7528\u5fc5\u987b\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e"},"\u5f02\u6b65\u8c03\u7528\u5fc5\u987b\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'\u5f53\u6211\u4eec\u8fdb\u884c\u4e00\u4e9b\u590d\u6742\u8c03\u7528\u7684\u65f6\u5019\uff0c\u4f1a\u51fa\u73b0"\u56de\u8c03\u5730\u72f1";\n')),(0,o.kt)("h3",{id:"\u95ee\u9898"},"\u95ee\u9898\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\u5f02\u6b65\u5fc5\u987b\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u7ed3\u679c\uff0c\u56de\u8c03\u51fd\u6570\u4e00\u591a\u5c31\u5f88\u75db\u82e6;\n")),(0,o.kt)("h2",{id:"promise"},"Promise"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1.Promise\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u89e3\u51b3\u5f02\u6b65\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u95ee\u9898;\n\n2.Promise\u5c31\u662f\u4e00\u4e2a\u7528\u6765\u5b58\u50a8\u6570\u636e\u7684\u5bb9\u5668;\n\n\u5b83\u62e5\u6709\u7740\u4e00\u5957\u7279\u6b8a\u7684\u5b58\u53d6\u6570\u636e\u7684\u65b9\u5f0f;\n\n\u8fd9\u4e2a\u65b9\u5f0f\u4f7f\u5f97\u5b83\u91cc\u8fb9\u53ef\u4ee5\u5b58\u50a8\u5f02\u6b65\u8c03\u7528\u7684\u7ed3\u679c;\n")),(0,o.kt)("h3",{id:"\u521b\u5efapromise"},"\u521b\u5efaPromise"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1.\u521b\u5efaPromise\u65f6\uff0c\u6784\u9020\u51fd\u6570\u4e2d\u9700\u8981\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570;\n\n2.Promise\u6784\u9020\u51fd\u6570\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5b83\u4f1a\u5728\u521b\u5efaPromise\u65f6\u8c03\u7528;\n\n\u8c03\u7528\u65f6\u4f1a\u6709\u4e24\u4e2a\u53c2\u6570\u4f20\u9012\u8fdb\u53bb;\n\n3.resolve \u548c reject \u662f\u4e24\u4e2a\u51fd\u6570;\n\n\u901a\u8fc7\u8fd9\u4e24\u4e2a\u51fd\u6570\u53ef\u4ee5\u5411Promise\u4e2d\u5b58\u50a8\u6570\u636e;\n\n4.resolve\u5728\u6267\u884c\u6b63\u5e38\u65f6\u5b58\u50a8\u6570\u636e;\n\nreject\u5728\u6267\u884c\u9519\u8bef\u65f6\u5b58\u50a8\u6570\u636e;\n\n5.\u901a\u8fc7\u51fd\u6570\u6765\u5411Promise\u4e2d\u6dfb\u52a0\u6570\u636e;\n\n\u597d\u5904\u5c31\u662f\u53ef\u4ee5\u7528\u6765\u6dfb\u52a0\u5f02\u6b65\u8c03\u7528\u7684\u6570\u636e;\n")),(0,o.kt)("h3",{id:"\u4ecepromise\u4e2d\u8bfb\u53d6\u6570\u636e"},"\u4ecePromise\u4e2d\u8bfb\u53d6\u6570\u636e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1.\u53ef\u4ee5\u901a\u8fc7Promise\u7684\u5b9e\u4f8b\u65b9\u6cd5then\u6765\u8bfb\u53d6Promise\u4e2d\u5b58\u50a8\u7684\u6570\u636e;\n\n2.then\u9700\u8981\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570;\n\n\u56de\u8c03\u51fd\u6570\u7528\u6765\u83b7\u53d6Promise\u4e2d\u7684\u6570\u636e;\n\n3.\u901a\u8fc7resolve\u5b58\u50a8\u7684\u6570\u636e\uff0c\u4f1a\u8c03\u7528\u7b2c\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de;\n\n\u53ef\u4ee5\u5728\u7b2c\u4e00\u4e2a\u51fd\u6570\u4e2d\u7f16\u5199\u5904\u7406\u6570\u636e\u7684\u4ee3\u7801;\n\n4.\u901a\u8fc7reject\u5b58\u50a8\u7684\u6570\u636e\u6216\u51fa\u73b0\u5f02\u5e38\u65f6\uff0c\u4f1a\u8c03\u7528\u7b2c\u4e8c\u4e2a\u51fd\u6570\u8fd4\u56de;\n\n\u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2a\u51fd\u6570\u4e2d\u7f16\u5199\u5904\u7406\u5f02\u5e38\u7684\u4ee3\u7801;\n")),(0,o.kt)("h3",{id:"promise\u4e2d\u7ef4\u62a4\u4e86\u4e24\u4e2a\u9690\u85cf\u5c5e\u6027"},"Promise\u4e2d\u7ef4\u62a4\u4e86\u4e24\u4e2a\u9690\u85cf\u5c5e\u6027"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"PromiseResult\uff1a\n\n    \u7528\u6765\u5b58\u50a8\u6570\u636e;\n\nPromiseState\uff1a\n\n1.\u8bb0\u5f55Promise\u7684\u72b6\u6001\uff08\u4e09\u79cd\u72b6\u6001\uff09;\n\n    pending\uff08\u8fdb\u884c\u4e2d\uff09;\n\n    fulfilled\uff08\u5b8c\u6210\uff09; \u901a\u8fc7resolve\u5b58\u50a8\u6570\u636e\u65f6;\n\n    rejected\uff08\u62d2\u7edd\uff0c\u51fa\u9519\uff09; \u51fa\u9519\u6216\u901a\u8fc7reject\u5b58\u50a8\u6570\u636e\u65f6;\n\n2.state\u53ea\u80fd\u4fee\u6539\u4e00\u6b21\uff0c\u4fee\u6539\u4ee5\u540e\u6c38\u8fdc\u4e0d\u4f1a\u518d\u53d8;\n")),(0,o.kt)("h3",{id:"\u6d41\u7a0b"},"\u6d41\u7a0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1.\u5f53Promise\u521b\u5efa\u65f6\uff0cPromiseState\u521d\u59cb\u503c\u4e3apending;\n\n2.\u901a\u8fc7resolve\u5b58\u50a8\u6570\u636e\u65f6\uff0cPromiseState\u53d8\u4e3afulfilled(\u5b8c\u6210);\n\nPromiseResult\u53d8\u4e3a\u5b58\u50a8\u7684\u6570\u636e;\n\n3.\u901a\u8fc7reject\u5b58\u50a8\u6570\u636e\u6216\u51fa\u9519\u65f6\uff0cPromiseState\u53d8\u4e3arejected(\u62d2\u7edd);\n\nPromiseResult\u53d8\u4e3a\u5b58\u50a8\u7684\u6570\u636e \u6216 \u5f02\u5e38\u5bf9\u8c61;\n")),(0,o.kt)("h3",{id:"\u8bfb\u53d6\u6d41\u7a0b"},"\u8bfb\u53d6\u6d41\u7a0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1.\u5f53\u6211\u4eec\u901a\u8fc7then\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u76f8\u5f53\u4e8e\u4e3aPromise\u8bbe\u7f6e\u4e86\u56de\u8c03\u51fd\u6570;\n\n2.\u5982\u679cPromiseState\u53d8\u4e3afulfilled;\n\n\u5219\u8c03\u7528then\u7684\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e;\n\n3.\u5982\u679cPromiseState\u53d8\u4e3arejected;\n\n\u5219\u8c03\u7528then\u7684\u7b2c\u4e8c\u4e2a\u56de\u8c03\u7518\u8083\u6765\u8fd4\u56de\u6570\u636e;\n")),(0,o.kt)("h2",{id:"catch"},"catch();"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1.\u7528\u6cd5\u548cthen\u7c7b\u4f3c\uff0c\u4f46\u662f\u53ea\u9700\u8981\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570;\n\n2.catch()\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u53ea\u4f1a\u5728Promise\u88ab\u62d2\u7edd\u65f6\u624d\u8c03\u7528;\n\n3.catch()\u76f8\u5f53\u4e8e then( null , reason => {} );\n\n4.catch()\u5c31\u662f\u4e00\u4e2a\u4e13\u95e8\u5904\u7406Promise\u5f02\u5e38\u7684\u65b9\u6cd5;\n")),(0,o.kt)("h2",{id:"finally"},"finally();"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1.\u65e0\u8bba\u662f\u6b63\u5e38\u5b58\u50a8\u8fd8\u662f\u51fa\u73b0\u5f02\u5e38\uff0cfinally()\u603b\u4f1a\u6267\u884c;\n\n2.\u4f46\u662ffinally()\u7684\u56de\u8c03\u51fd\u6570\u4e2d\u4e0d\u4f1a\u63a5\u6536\u5230\u6570\u636e;\n\n3.finally()\u901a\u5e38\u7528\u6765\u7f16\u5199\u4e00\u4e9b\u65e0\u8bba\u6210\u529f\u4e0e\u5426\u90fd\u8981\u6267\u884c\u7684\u4ee3\u7801;\n")),(0,o.kt)("h3",{id:"\u5c0f\u7ed3"},"\u5c0f\u7ed3\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"promise\u5c31\u662f\u4e00\u4e2a\u7528\u6765\u5b58\u50a8\u6570\u636e\u7684\u5bf9\u8c61;\n\n\u4f46\u662f\u7531\u4e8ePromise\u5b58\u53d6\u7684\u65b9\u5f0f\u7279\u6b8a;\n\n\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5c06\u5f02\u6b65\u8c03\u7528\u7684\u7ed3\u679c\u5b58\u50a8\u5230Promise\u4e2d;\n")),(0,o.kt)("h2",{id:"promise\u4e2d\u7684"},"Promise\u4e2d\u7684"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"then( return new Promise() );\n\ncatch();\n\nfinally();\n\n1.\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise;\n\n2.Promise\u4e2d\u4f1a\u5b58\u50a8\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c;\n\n3.finally\u7684\u8fd4\u56de\u503c\uff0c\u4e0d\u4f1a\u5b58\u50a8\u5230\u65b0\u7684Promise\u4e2d;\n")),(0,o.kt)("h3",{id:"\u5bf9promise\u8fdb\u884c\u94fe\u5f0f\u8c03\u7528\u65f6"},"\u5bf9promise\u8fdb\u884c\u94fe\u5f0f\u8c03\u7528\u65f6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1.\u540e\u9762\u7684\u65b9\u6cd5\uff08then \u548c catch\uff09\u8bfb\u53d6\u4e0a\u4e00\u6b65\u7684\u6267\u884c\u7ed3\u679c;\n\n2.\u5982\u679c\u4e0a\u4e00\u6b65\u7684\u6267\u884c\u7ed3\u679c\u4e0d\u662f\u5f53\u524d\u60f3\u8981\u7684\u7ed3\u679c\uff0c\u5219\u8df3\u8fc7\u5f53\u524d\u7684\u65b9\u6cd5;\n\n3.\u5f53Promise\u51fa\u73b0\u5f02\u5e38\u65f6;\n\n\u800c\u6574\u4e2a\u8c03\u7528\u94fe\u4e2d\u6ca1\u6709\u51fa\u73b0catch\uff0c\u5219\u5f02\u5e38\u4f1a\u5411\u5916\u629b\u51fa;\n")),(0,o.kt)("h3",{id:"\u9759\u6001\u65b9\u6cd5"},"\u9759\u6001\u65b9\u6cd5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Promise.resolve();\n\n    \u521b\u5efa\u4e00\u4e2a\u7acb\u5373\u5b8c\u6210\u7684Promise;\n\nPromise.reject();\n\n    \u521b\u5efa\u4e00\u4e2a\u7acb\u5373\u62d2\u7edd\u7684Promise;\n\nPromise.all([...]);\n\n    \u540c\u65f6\u8fd4\u56de\u591a\u4e2aPromise\u7684\u6267\u884c\u7ed3\u679c\u7684\u6570\u7ec4;\n\n    \u5176\u4e2d\u6709\u4e00\u4e2a\u62a5\u9519\uff0c\u5c31\u8fd4\u56de\u9519\u8bef;\n\nPromise.allSettled([...]);\n\n    \u540c\u65f6\u8fd4\u56de\u591a\u4e2aPromise\u7684\u6267\u884c\u7ed3\u679c\u7684\u5bf9\u8c61\u6570\u7ec4;\n\n    \u65e0\u8bba\u6210\u529f\u6216\u5931\u8d25;\n\n    { status: ' fulfilled ' , value: 123 };\n\n    { status: ' rejected ' , reason: 123 };\n\nPromise.race([...]);\n\n    \u8fd4\u56de\u6267\u884c\u6700\u5feb\u7684Promise\uff08\u4e0d\u8003\u8651\u5bf9\u9519\uff09;\n\nPromise.any([...]);\n\n    \u8fd4\u56de\u6267\u884c\u6700\u5feb\u7684\u6210\u529fPromise;\n\n    \u5982\u679c\u90fd\u5f02\u5e38\u624d\u4f1a\u8fd4\u56de\u5f02\u5e38;\n")))}d.isMDXComponent=!0}}]);